<main class="px-10 py-8 flex flex-col gap-8">
  <div class="flex flex-col gap-2">
    <h2 class="text-3xl font-bold">Reports & Analytics</h2>
    <p class="text-gray-500">Insights into your pharmacy performance</p>
  </div>

  <section class="flex flex-col gap-8">
    <div class="grid grid-cols-4 gap-5 items-center">
      <app-report-card
        title="Total Revenue"
        [summary]="582.86"
        [isCurrency]="true"
        [icon]="icons.BadgeCent"
        iconColor="#00a63e"
      />
      <app-report-card
        title="Avg. Transaction"
        [summary]="97.14"
        [isCurrency]="true"
        [icon]="icons.TrendingUp"
        iconColor="#2a9d90"
      />
      <app-report-card
        title="Low Stock Alerts"
        [summary]="lowStocks().length"
        [icon]="icons.TriangleAlert"
        iconColor="#d08700"
      />
      <app-report-card
        title="Expiring Soon"
        [summary]="expiringSoon().length"
        [icon]="icons.Clock"
        iconColor="#fb2c36"
      />
    </div>
    <div class="grid grid-cols-2 gap-6 items-stretch">
      <app-sales-trend-data-chart />
      <app-inventory-data-chart />
    </div>
    <app-top-selling-data-chart />

    <div class="grid grid-cols-2 gap-5 items-stretch">
      <app-audit-logs title="Low Stock Items" [icon]="icons.Package" iconColor="#d08700">
        <ul class="flex flex-col gap-3 px-4">
          @for(item of lowStocks(); track item.id){
          <li
            class="flex items-center justify-between p-3 border border-yellow-600/20 bg-yellow-500/10 rounded-xl"
          >
            <span>
              <p>{{ item.name }}</p>
              <p class="text-gray-500 text-sm">Batch: {{ item.batchNumber }}</p>
            </span>
            <div>
              <span
                class="px-2 py-0.5 text-xs bg-yellow-400/20 text-yellow-600 rounded-xl my-1 inline-block"
                >{{ item.quantity }} left</span
              >
              <p class="text-xs text-gray-500">Min: {{ item.minStock }}</p>
            </div>
          </li>
          }
        </ul>
      </app-audit-logs>
      <app-audit-logs
        title="Expiring Soon (30 days) & Expired"
        [icon]="icons.Clock"
        iconColor="#fb2c36"
      >
        <ul class="flex flex-col gap-3 px-4">
          @for(item of expiredLogs(); track item.id){
          <li
            class="flex items-center justify-between p-3 border border-red-600/20 bg-red-500/10 rounded-xl"
          >
            <span>
              <p>{{ item.name }}</p>
              <p class="text-gray-500 text-sm">Batch: {{ item.batchNumber }}</p>
            </span>
            <div class="text-right">
              <span
                class="px-2 py-0.5 text-xs bg-red-400/20 text-red-600 rounded-xl my-1 inline-block"
                [class.line-through]="expired().includes(item)"
                >{{ item.expiryDate | date : 'MMM dd, yyyy' }}</span
              >
              <p class="text-xs text-gray-500">{{ item.quantity }} units</p>
            </div>
          </li>
          }
        </ul>
      </app-audit-logs>
    </div>
  </section>
</main>
